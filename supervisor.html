<!DOCTYPE html>
<html lang="en">
<head>

    <link rel="stylesheet" href="trms.css">
   
    <title>Supervisor</title>
</head>
<body>       
   
<center>
    <H1> Application Under Supervisor</H1>
      
    

</center>
    <table>
          <tr>
            <th>Application ID</th>
            <th>Event ID</th>
            <th>Employee ID</th>
            <th>Employee Name</th>
            <th>Event Start Date</th>
            <th>Event End Date</th>
            <th>Event Cost</th>
            <th>Grade</th>
            <th>Urgent</th>
            <th>Work Related</th>
            <th>Status</th>
          </tr>
   
          <tr>
            <td id = "appId0">--</th>
            <td id="eventId0">--</th>
            <td id="empId0">--</td>
            <td id="empName0">--</td>
            <td id = "startDate0">--</th>
            <td id="EndDate0">--</th>
            <td id="cost0">--</td>
            <td id="grade0">--</td>
            <td id="urgent0">--</th>
            <td id="related0">--</td>
            <td id="status0">--</td>
          </tr>
          <tr>
            <td id = "appId1">--</th>
            <td id="eventId1">--</th>
            <td id="empId1">--</td>
            <td id="empName1">--</td>
            <td id = "startDate1">--</th>
            <td id="EndDate1">--</th>
            <td id="cost1">--</td>
            <td id="grade1">--</td>
            <td id="urgent1">--</th>
            <td id="related1">--</td>
            <td id="status1">--</td>
          </tr>
          <tr>
            <td id = "appId2">--</th>
            <td id="eventId2">--</th>
            <td id="empId2">--</td>
            <td id="empName2">--</td>
            <td id = "startDate2">--</th>
            <td id="EndDate2">--</th>
            <td id="cost2">--</td>
            <td id="grade2">--</td>
            <td id="urgent2">--</th>
            <td id="related2">--</td>
            <td id="status2">--</td>
          </tr>          
          <tr>
            <td id = "appId3">--</th>
            <td id="eventId3">--</th>
            <td id="empId3">--</td>
            <td id="empName3">--</td>
            <td id = "startDate3">--</th>
            <td id="EndDate3">--</th>
            <td id="cost3">--</td>
            <td id="grade3">--</td>
            <td id="urgent3">--</th>
            <td id="related3">--</td>
            <td id="status3">--</td>
          </tr>
          <tr>
            <td id = "appId4">--</th>
            <td id="eventId4">--</th>
            <td id="empId4">--</td>
            <td id="empName4">--</td>
            <td id = "startDate4">--</th>
            <td id="EndDate4">--</th>
            <td id="cost4">--</td>
            <td id="grade4">--</td>
            <td id="urgent4">--</th>
            <td id="related4">--</td>
            <td id="status4">--</td>
          </tr>
          <tr>
            <td id = "appId5">--</th>
            <td id="eventId5">--</th>
            <td id="empId5">--</td>
            <td id="empName5">--</td>
            <td id = "startDate5">--</th>
            <td id="EndDate5">--</th>
            <td id="cost5">--</td>
            <td id="grade5">--</td>
            <td id="urgent5">--</th>
            <td id="related5">--</td>
            <td id="status5">--</td>
          </tr>

          <tr>
            <td id = "appId6">--</th>
            <td id="eventId6">--</th>
            <td id="empId6">--</td>
            <td id="empName6">--</td>
            <td id = "startDate6">--</th>
            <td id="EndDate6">--</th>
            <td id="cost6">--</td>
            <td id="grade6">--</td>
            <td id="urgent6">--</th>
            <td id="related6">--</td>
            <td id="status6">--</td>
          </tr>
          <tr>
            <td id = "appId7">--</th>
            <td id="eventId7">--</th>
            <td id="empId7">--</td>
            <td id="empName7">--</td>
            <td id = "startDate7">--</th>
            <td id="EndDate7">--</th>
            <td id="cost7">--</td>
            <td id="grade7">--</td>
            <td id="urgent7">--</th>
            <td id="related7">--</td>
            <td id="status7">--</td>
          </tr>
       
      </table>
      <br>

      <center>
      <label for="id">Application Waiting for Supervisor decession </label><br>
      
      <button onclick="supervisor()">Find Application</button><br><br>

      <H1>Pull the Application</H1>
    </center>
      <table>
        <tr>
          <th>Application ID</th>
          <th>Event ID</th>
          <th>Employee ID</th>
          <th>Employee Name</th>
          <th>Event Start Date</th>
          <th>Event End Date</th>
          <th>Event Cost</th>
          <th>Grade</th>
          <th>Urgent</th>
          <th>Work Related</th>
          <th>Status</th>
        </tr>
  
        <tr>
          <td id = "appId">--</th>
          <td id="eventId">--</th>
          <td id="empId">--</td>
          <td id="empName">--</td>
          <td id = "startDate">--</th>
          <td id="EndDate">--</th>
          <td id="cost">--</td>
          <td id="grade">--</td>
          <td id="urgent">--</th>
          <td id="related">--</td>
          <td id="status">--</td>
        </tr>
     
    </table>

<center>
      <br>
      <label for="id">Application ID</label>
      <input type="text" id="infoid">
      <button onclick="checkInformation()">Pull Information</button><br><br>

    </center>
      
    <table>
        <tr>
            <th><label for="cost" >Application ID</label></th>
            <td><input type="text"  id="appIdu"></td>
          </tr>
        <tr>
          <th><label for="empName" >Applicant Name</label></th>
          <td><input type="text"  id="empNameu"></td>
        </tr>
        <tr>
          <th><label for="empId" >Employee ID</label></th>
          <td><input type="text"  id="empIdu"></td>
        </tr>
        <tr>
          <th><label for="eventId" >Event ID</label></th>
          <td><input type="text"  id="eventIdu"></td>
        </tr>
        <tr>
          <th><label for="startDate" >Start Date</label></th>
          <td><input type="text"  id="startDateu"></td>
        </tr>
    
        <tr>
          <th><label for="endDate" >End Date</label></th>
          <td><input type="text"  id="endDateu"></td>
        </tr>
        <tr>
          <th><label for="cost" >Program Cost</label></th>
          <td><input type="text"  id="costu"></td>
        </tr>

        <tr>
            <th><label for="cost" >Grade</label></th>
            <td><input type="text"  id="gradeu"></td>
          </tr>

          <tr>
            <th><label for="cost" >Status</label></th>
            <td><input type="text"  id="statusu"></td>
          </tr>
    
        <tr>
          <th><label for="urgentu" >Urgent</label></th>
            <td>
               <label for="yes">Yes</label>
               <input type="radio" id="yes" value="true" name="urgentu">
               <label for="no">No</label>
               <input type="radio" id="no" value="false" name="urgentu"><br>
            </td>
      </tr>
    
        <tr>
          <th><label for="related" >Work Related</label></th>
            <td>
               <label for="yes">Yes</label>
               <input type="radio" id="yes" value="true" name="relatedu">
               <label for="no">No</label>
               <input type="radio" id="no" value="false" name="relatedu"><br>
            </td>
      </tr>
    
      </table>
      <br>
      <br>


    <center>
      <H1>Update Application Status</H1>
      <label for="id">Application ID</label>
      <input type="text" id="id">

      <button onclick="updateInformation()">Update</button><br>
    </center><br><br>
    <center><a href="C:\Users\topuc\Desktop\Project 1_TRMS\dashboard.html">Dashboard</a></center>

</body>

<script>

    async function checkInformation() {

        const id = document.getElementById("infoid").value;
        const url = `http://localhost:7000/application/`+ id;

        const httpResponse = await fetch(url);
        const body = await httpResponse.json();

        console.log(body);

        document.getElementById("appId").innerHTML = body.appId + "<br>";
        document.getElementById("eventId").innerHTML = body.enventId+ "<br>";
        document.getElementById("empId").innerHTML = body.empId+ "<br>";
        document.getElementById("empName").innerHTML = body.empName+ "<br>";
        document.getElementById("startDate").innerHTML = body.eventStartDate + "<br>";
        document.getElementById("EndDate").innerHTML = body.eventEndDate+ "<br>";
        document.getElementById("cost").innerHTML = body.cost+ "<br>";
        document.getElementById("grade").innerHTML = body.empName+ "<br>";
        document.getElementById("urgent").innerHTML = body.urgent+ "<br>";
        document.getElementById("related").innerHTML = body.workRelated+ "<br>";
        document.getElementById("status").innerHTML = body.status_id+ "<br>";
    }



async function supervisor() {

 const url1 = `http://localhost:7000/applications/`;

 const httpResponse = await fetch(url1);
 const body = await httpResponse.json();

 console.log(body);
 
 for (let i = 0; i< body.length ; i++) {
     if (body[i].status_id < 6){

 document.getElementById("appId"+i).innerHTML = body[i].appId + "<br>";
 document.getElementById("eventId"+i).innerHTML = body[i].enventId+ "<br>";
 document.getElementById("empId"+i).innerHTML = body[i].empId+ "<br>";
 document.getElementById("empName"+i).innerHTML = body[i].empName+ "<br>";
 document.getElementById("startDate"+i).innerHTML = body[i].eventStartDate + "<br>";
 document.getElementById("EndDate"+i).innerHTML = body[i].eventEndDate+ "<br>";
 document.getElementById("cost"+i).innerHTML = body[i].cost+ "<br>";
 document.getElementById("grade"+i).innerHTML = body[i].empName+ "<br>";
 document.getElementById("urgent"+i).innerHTML = body[i].urgent+ "<br>";
 document.getElementById("related"+i).innerHTML = body[i].workRelated+ "<br>";
 document.getElementById("status"+i).innerHTML = body[i].status_id+ "<br>";

     }
 }

}



async function updateInformation() {

 const id = document.getElementById("infoid").value;



    const appIduValue = document.getElementById("appIdu").value;
    const eventIduValue = document.getElementById("eventIdu").value;
    const empIduValue = document.getElementById("empIdu").value;
    const empNameuValue = document.getElementById("empNameu").value;
    const startDateuValue = document.getElementById("startDateu").value;
    const endDateuValue = document.getElementById("endDateu").value;
    const costuValue = document.getElementById("costu").value;
    const gradeuValue = document.getElementById("gradeu").value;
    
    urgentuValue = document.querySelector('input[name="urgentu"]:checked').value;
    relateduValue = document.querySelector('input[name="relatedu"]:checked').value;

    const statusuValue = document.getElementById("statusu").value;

    const dataObject = {

        appId: appIduValue,
        enventId: eventIduValue,
        empId: empIduValue,
        empName: empNameuValue,
        eventStartDate: startDateuValue,
        eventEndDate: endDateuValue,
        cost: costuValue,
        grade: gradeuValue,
        urgent: urgentuValue,
        workRelated: relateduValue,
        status_id: statusuValue
    }

    fetch("http://localhost:7000/application/"+ id,{
    method:'PUT',
    headers:{
    'Content-Type':'application/json'
    },
    body:JSON.stringify(dataObject)
}).then(response=>{
    return response.json()
}).then(data=> 

console.log(data)
);

 }
        
</script>

</html>